echo 'IyEvYmluL2Jhc2gNCiMgU2NyaXB0IHBhcmEgY29uZmlndXJhciBHUFUgU2VydmVyIG5vIFBPRCBSdW5Qb2QNCiMgRXhlY3V0YXIgbm8gV2ViIFRlcm1pbmFsIGRvIFJ1blBvZDogYmFzaCBzZXR1cF9wb2Quc2gNCg0Kc2V0IC1lDQoNCmVjaG8gIj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ig0KZWNobyAiU0VUVVAgR1BVIFNFUlZFUiAtIFJVTlBPRCINCmVjaG8gIj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ig0KDQojIENyaWEgZGlyZXRvcmlvDQpta2RpciAtcCAvd29ya3NwYWNlL3JhZy1waXBlbGluZQ0KDQojIENyaWEgZ3B1X3NlcnZlci5weQ0KY2F0ID4gL3dvcmtzcGFjZS9yYWctcGlwZWxpbmUvZ3B1X3NlcnZlci5weSA8PCAnRU5ET0ZGSUxFJw0KIiIiDQpHUFUgU2VydmVyIHVuaWZpY2FkbyBwYXJhIFBPRC4NCg0KQ29tYmluYToNCjEuIEVtYmVkZGluZ3MgKEJHRS1NMykgLSBkZW5zZSArIHNwYXJzZQ0KMi4gTExNIHByb3h5IHBhcmEgdkxMTSBsb2NhbA0KDQpSb2RhIG5hIHBvcnRhIDgwODAgKGV4cG9zdGEgZXh0ZXJuYW1lbnRlIHZpYSBSdW5Qb2QpLg0KDQpVc286DQogICAgcHl0aG9uIGdwdV9zZXJ2ZXIucHkgLS1wb3J0IDgwODANCiIiIg0KDQppbXBvcnQgb3MNCmltcG9ydCB0aW1lDQppbXBvcnQgYXN5bmNpbw0KaW1wb3J0IGxvZ2dpbmcNCmZyb20gdHlwaW5nIGltcG9ydCBPcHRpb25hbA0KZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUNCmZyb20gY29udGV4dGxpYiBpbXBvcnQgYXN5bmNjb250ZXh0bWFuYWdlcg0KDQppbXBvcnQgaHR0cHgNCmZyb20gZmFzdGFwaSBpbXBvcnQgRmFzdEFQSSwgSFRUUEV4Y2VwdGlvbg0KZnJvbSBmYXN0YXBpLm1pZGRsZXdhcmUuY29ycyBpbXBvcnQgQ09SU01pZGRsZXdhcmUNCmZyb20gcHlkYW50aWMgaW1wb3J0IEJhc2VNb2RlbA0KDQpsb2dnaW5nLmJhc2ljQ29uZmlnKGxldmVsPWxvZ2dpbmcuSU5GTykNCmxvZ2dlciA9IGxvZ2dpbmcuZ2V0TG9nZ2VyKF9fbmFtZV9fKQ0KDQojIHZMTE0gbG9jYWwgKG5vIG1lc21vIFBPRCkNClZMTE1fQkFTRV9VUkwgPSBvcy5nZXRlbnYoIlZMTE1fQkFTRV9VUkwiLCAiaHR0cDovL2xvY2FsaG9zdDo4MDAwIikNCg0KIyBNb2RlbG8gZGUgZW1iZWRkaW5ncyAobGF6eSBsb2FkKQ0KX2VtYmVkX21vZGVsID0gTm9uZQ0KX2VtYmVkX2xvY2sgPSBhc3luY2lvLkxvY2soKQ0KDQoNCmRlZiBnZXRfZW1iZWRfbW9kZWwoKToNCiAgICAiIiJDYXJyZWdhIEJHRS1NMyAobGF6eSBsb2FkaW5nKS4iIiINCiAgICBnbG9iYWwgX2VtYmVkX21vZGVsDQogICAgaWYgX2VtYmVkX21vZGVsIGlzIE5vbmU6DQogICAgICAgIGxvZ2dlci5pbmZvKCJDYXJyZWdhbmRvIEJHRS1NMy4uLiIpDQogICAgICAgIHN0YXJ0ID0gdGltZS50aW1lKCkNCiAgICAgICAgZnJvbSBGbGFnRW1iZWRkaW5nIGltcG9ydCBCR0VNM0ZsYWdNb2RlbA0KICAgICAgICBfZW1iZWRfbW9kZWwgPSBCR0VNM0ZsYWdNb2RlbCgNCiAgICAgICAgICAgICJCQUFJL2JnZS1tMyIsDQogICAgICAgICAgICB1c2VfZnAxNj1UcnVlLA0KICAgICAgICAgICAgZGV2aWNlPSJjdWRhIiwNCiAgICAgICAgKQ0KICAgICAgICBsb2dnZXIuaW5mbyhmIkJHRS1NMyBjYXJyZWdhZG8gZW0ge3RpbWUudGltZSgpIC0gc3RhcnQ6LjJmfXMiKQ0KICAgIHJldHVybiBfZW1iZWRfbW9kZWwNCg0KDQojIEhUVFAgY2xpZW50IHBhcmEgdkxMTQ0KX2h0dHBfY2xpZW50OiBPcHRpb25hbFtodHRweC5Bc3luY0NsaWVudF0gPSBOb25lDQoNCg0KYXN5bmMgZGVmIGdldF9odHRwX2NsaWVudCgpIC0+IGh0dHB4LkFzeW5jQ2xpZW50Og0KICAgIGdsb2JhbCBfaHR0cF9jbGllbnQNCiAgICBpZiBfaHR0cF9jbGllbnQgaXMgTm9uZSBvciBfaHR0cF9jbGllbnQuaXNfY2xvc2VkOg0KICAgICAgICBfaHR0cF9jbGllbnQgPSBodHRweC5Bc3luY0NsaWVudCgNCiAgICAgICAgICAgIGJhc2VfdXJsPVZMTE1fQkFTRV9VUkwsDQogICAgICAgICAgICB0aW1lb3V0PWh0dHB4LlRpbWVvdXQoMTgwLjAsIGNvbm5lY3Q9MzAuMCksDQogICAgICAgICkNCiAgICByZXR1cm4gX2h0dHBfY2xpZW50DQoNCg0KQGFzeW5jY29udGV4dG1hbmFnZXINCmFzeW5jIGRlZiBsaWZlc3BhbihhcHA6IEZhc3RBUEkpOg0KICAgICIiIkxpZmVjeWNsZSBkbyBhcHAuIiIiDQogICAgbG9nZ2VyLmluZm8oIkluaWNpYW5kbyBHUFUgU2VydmVyLi4uIikNCiAgICBsb2dnZXIuaW5mbyhmInZMTE0gVVJMOiB7VkxMTV9CQVNFX1VSTH0iKQ0KICAgIHlpZWxkDQogICAgZ2xvYmFsIF9odHRwX2NsaWVudA0KICAgIGlmIF9odHRwX2NsaWVudDoNCiAgICAgICAgYXdhaXQgX2h0dHBfY2xpZW50LmFjbG9zZSgpDQogICAgbG9nZ2VyLmluZm8oIkdQVSBTZXJ2ZXIgZW5jZXJyYWRvIikNCg0KDQphcHAgPSBGYXN0QVBJKA0KICAgIHRpdGxlPSJHUFUgU2VydmVyIC0gUkFHIFBpcGVsaW5lIiwNCiAgICBkZXNjcmlwdGlvbj0iRW1iZWRkaW5ncyAoQkdFLU0zKSArIExMTSBwcm94eSAodkxMTSkiLA0KICAgIHZlcnNpb249IjEuMC4wIiwNCiAgICBsaWZlc3Bhbj1saWZlc3BhbiwNCikNCg0KYXBwLmFkZF9taWRkbGV3YXJlKA0KICAgIENPUlNNaWRkbGV3YXJlLA0KICAgIGFsbG93X29yaWdpbnM9WyIqIl0sDQogICAgYWxsb3dfY3JlZGVudGlhbHM9VHJ1ZSwNCiAgICBhbGxvd19tZXRob2RzPVsiKiJdLA0KICAgIGFsbG93X2hlYWRlcnM9WyIqIl0sDQopDQoNCg0KIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQojIE1vZGVsb3MgUHlkYW50aWMNCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KDQpjbGFzcyBFbWJlZFJlcXVlc3QoQmFzZU1vZGVsKToNCiAgICB0ZXh0czogbGlzdFtzdHJdDQogICAgYmF0Y2hfc2l6ZTogaW50ID0gOA0KDQoNCmNsYXNzIEVtYmVkUmVzcG9uc2UoQmFzZU1vZGVsKToNCiAgICBkZW5zZTogbGlzdFtsaXN0W2Zsb2F0XV0NCiAgICBzcGFyc2U6IGxpc3RbZGljdF0NCiAgICBjb3VudDogaW50DQogICAgdGltZV9tczogZmxvYXQNCg0KDQpjbGFzcyBDaGF0TWVzc2FnZShCYXNlTW9kZWwpOg0KICAgIHJvbGU6IHN0cg0KICAgIGNvbnRlbnQ6IHN0cg0KDQoNCmNsYXNzIENoYXRSZXF1ZXN0KEJhc2VNb2RlbCk6DQogICAgbWVzc2FnZXM6IGxpc3RbQ2hhdE1lc3NhZ2VdDQogICAgbW9kZWw6IHN0ciA9ICJRd2VuL1F3ZW4zLThCLUFXUSINCiAgICB0ZW1wZXJhdHVyZTogZmxvYXQgPSAwLjANCiAgICBtYXhfdG9rZW5zOiBpbnQgPSA1MTINCiAgICByZXNwb25zZV9mb3JtYXQ6IE9wdGlvbmFsW2RpY3RdID0gTm9uZQ0KDQoNCmNsYXNzIENoYXRSZXNwb25zZShCYXNlTW9kZWwpOg0KICAgIGNvbnRlbnQ6IHN0cg0KICAgIG1vZGVsOiBzdHINCiAgICB1c2FnZTogZGljdA0KICAgIHRpbWVfbXM6IGZsb2F0DQoNCg0KY2xhc3MgSGVhbHRoUmVzcG9uc2UoQmFzZU1vZGVsKToNCiAgICBzdGF0dXM6IHN0cg0KICAgIGVtYmVkZGluZ19tb2RlbF9sb2FkZWQ6IGJvb2wNCiAgICB2bGxtX2F2YWlsYWJsZTogYm9vbA0KICAgIHZsbG1fdXJsOiBzdHINCiAgICBncHVfYXZhaWxhYmxlOiBib29sDQogICAgdGltZXN0YW1wOiBzdHINCg0KDQojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiMgRW5kcG9pbnRzIC0gSGVhbHRoDQojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCg0KQGFwcC5nZXQoIi9oZWFsdGgiLCByZXNwb25zZV9tb2RlbD1IZWFsdGhSZXNwb25zZSkNCmFzeW5jIGRlZiBoZWFsdGhfY2hlY2soKToNCiAgICAiIiJTdGF0dXMgZG8gc2Vydmlkb3IuIiIiDQogICAgZW1iZWRfbG9hZGVkID0gX2VtYmVkX21vZGVsIGlzIG5vdCBOb25lDQoNCiAgICAjIFZlcmlmaWNhIHZMTE0NCiAgICB2bGxtX29rID0gRmFsc2UNCiAgICB0cnk6DQogICAgICAgIGNsaWVudCA9IGF3YWl0IGdldF9odHRwX2NsaWVudCgpDQogICAgICAgIHJlc3AgPSBhd2FpdCBjbGllbnQuZ2V0KCIvaGVhbHRoIiwgdGltZW91dD01LjApDQogICAgICAgIHZsbG1fb2sgPSByZXNwLnN0YXR1c19jb2RlID09IDIwMA0KICAgIGV4Y2VwdCBFeGNlcHRpb246DQogICAgICAgIHBhc3MNCg0KICAgICMgVmVyaWZpY2EgR1BVDQogICAgZ3B1X29rID0gRmFsc2UNCiAgICB0cnk6DQogICAgICAgIGltcG9ydCB0b3JjaA0KICAgICAgICBncHVfb2sgPSB0b3JjaC5jdWRhLmlzX2F2YWlsYWJsZSgpDQogICAgZXhjZXB0IEV4Y2VwdGlvbjoNCiAgICAgICAgcGFzcw0KDQogICAgcmV0dXJuIEhlYWx0aFJlc3BvbnNlKA0KICAgICAgICBzdGF0dXM9Im9rIiwNCiAgICAgICAgZW1iZWRkaW5nX21vZGVsX2xvYWRlZD1lbWJlZF9sb2FkZWQsDQogICAgICAgIHZsbG1fYXZhaWxhYmxlPXZsbG1fb2ssDQogICAgICAgIHZsbG1fdXJsPVZMTE1fQkFTRV9VUkwsDQogICAgICAgIGdwdV9hdmFpbGFibGU9Z3B1X29rLA0KICAgICAgICB0aW1lc3RhbXA9ZGF0ZXRpbWUudXRjbm93KCkuaXNvZm9ybWF0KCksDQogICAgKQ0KDQoNCkBhcHAuZ2V0KCIvIikNCmFzeW5jIGRlZiByb290KCk6DQogICAgcmV0dXJuIHsNCiAgICAgICAgInNlcnZpY2UiOiAiR1BVIFNlcnZlciAtIFJBRyBQaXBlbGluZSIsDQogICAgICAgICJlbmRwb2ludHMiOiBbIi9oZWFsdGgiLCAiL2VtYmVkL2h5YnJpZCIsICIvbGxtL2NoYXQiLCAiL2xsbS9tb2RlbHMiXSwNCiAgICB9DQoNCg0KIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQojIEVuZHBvaW50cyAtIEVtYmVkZGluZ3MNCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KDQpAYXBwLnBvc3QoIi9lbWJlZC9oeWJyaWQiLCByZXNwb25zZV9tb2RlbD1FbWJlZFJlc3BvbnNlKQ0KYXN5bmMgZGVmIGVtYmVkX2h5YnJpZChyZXF1ZXN0OiBFbWJlZFJlcXVlc3QpOg0KICAgICIiIkdlcmEgZW1iZWRkaW5ncyBkZW5zZSArIHNwYXJzZSBjb20gQkdFLU0zLiIiIg0KICAgIHN0YXJ0ID0gdGltZS50aW1lKCkNCg0KICAgIHRyeToNCiAgICAgICAgbW9kZWwgPSBnZXRfZW1iZWRfbW9kZWwoKQ0KDQogICAgICAgIHJlc3VsdCA9IG1vZGVsLmVuY29kZSgNCiAgICAgICAgICAgIHJlcXVlc3QudGV4dHMsDQogICAgICAgICAgICBiYXRjaF9zaXplPXJlcXVlc3QuYmF0Y2hfc2l6ZSwNCiAgICAgICAgICAgIHJldHVybl9kZW5zZT1UcnVlLA0KICAgICAgICAgICAgcmV0dXJuX3NwYXJzZT1UcnVlLA0KICAgICAgICAgICAgcmV0dXJuX2NvbGJlcnRfdmVjcz1GYWxzZSwNCiAgICAgICAgKQ0KDQogICAgICAgIGRlbnNlID0gcmVzdWx0WydkZW5zZV92ZWNzJ10udG9saXN0KCkNCiAgICAgICAgc3BhcnNlID0gWw0KICAgICAgICAgICAge2ludChrKTogZmxvYXQodikgZm9yIGssIHYgaW4gcy5pdGVtcygpfQ0KICAgICAgICAgICAgZm9yIHMgaW4gcmVzdWx0WydsZXhpY2FsX3dlaWdodHMnXQ0KICAgICAgICBdDQoNCiAgICAgICAgZWxhcHNlZCA9ICh0aW1lLnRpbWUoKSAtIHN0YXJ0KSAqIDEwMDANCg0KICAgICAgICByZXR1cm4gRW1iZWRSZXNwb25zZSgNCiAgICAgICAgICAgIGRlbnNlPWRlbnNlLA0KICAgICAgICAgICAgc3BhcnNlPXNwYXJzZSwNCiAgICAgICAgICAgIGNvdW50PWxlbihkZW5zZSksDQogICAgICAgICAgICB0aW1lX21zPWVsYXBzZWQsDQogICAgICAgICkNCg0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgbG9nZ2VyLmV4Y2VwdGlvbihmIkVycm8gZW0gZW1iZWRfaHlicmlkOiB7ZX0iKQ0KICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTUwMCwgZGV0YWlsPXN0cihlKSkNCg0KDQpAYXBwLnBvc3QoIi9lbWJlZC9kZW5zZSIpDQphc3luYyBkZWYgZW1iZWRfZGVuc2UocmVxdWVzdDogRW1iZWRSZXF1ZXN0KToNCiAgICAiIiJHZXJhIGFwZW5hcyBlbWJlZGRpbmdzIGRlbnNlLiIiIg0KICAgIHN0YXJ0ID0gdGltZS50aW1lKCkNCg0KICAgIHRyeToNCiAgICAgICAgbW9kZWwgPSBnZXRfZW1iZWRfbW9kZWwoKQ0KDQogICAgICAgIHJlc3VsdCA9IG1vZGVsLmVuY29kZSgNCiAgICAgICAgICAgIHJlcXVlc3QudGV4dHMsDQogICAgICAgICAgICBiYXRjaF9zaXplPXJlcXVlc3QuYmF0Y2hfc2l6ZSwNCiAgICAgICAgICAgIHJldHVybl9kZW5zZT1UcnVlLA0KICAgICAgICAgICAgcmV0dXJuX3NwYXJzZT1GYWxzZSwNCiAgICAgICAgICAgIHJldHVybl9jb2xiZXJ0X3ZlY3M9RmFsc2UsDQogICAgICAgICkNCg0KICAgICAgICBkZW5zZSA9IHJlc3VsdFsnZGVuc2VfdmVjcyddLnRvbGlzdCgpDQogICAgICAgIGVsYXBzZWQgPSAodGltZS50aW1lKCkgLSBzdGFydCkgKiAxMDAwDQoNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICJkZW5zZSI6IGRlbnNlLA0KICAgICAgICAgICAgImNvdW50IjogbGVuKGRlbnNlKSwNCiAgICAgICAgICAgICJ0aW1lX21zIjogZWxhcHNlZCwNCiAgICAgICAgfQ0KDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICBsb2dnZXIuZXhjZXB0aW9uKGYiRXJybyBlbSBlbWJlZF9kZW5zZToge2V9IikNCiAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNfY29kZT01MDAsIGRldGFpbD1zdHIoZSkpDQoNCg0KIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQojIEVuZHBvaW50cyAtIExMTSAocHJveHkgcGFyYSB2TExNKQ0KIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQoNCkBhcHAucG9zdCgiL2xsbS9jaGF0IiwgcmVzcG9uc2VfbW9kZWw9Q2hhdFJlc3BvbnNlKQ0KYXN5bmMgZGVmIGxsbV9jaGF0KHJlcXVlc3Q6IENoYXRSZXF1ZXN0KToNCiAgICAiIiJDaGF0IGNvbXBsZXRpb24gdmlhIHZMTE0uIiIiDQogICAgc3RhcnQgPSB0aW1lLnRpbWUoKQ0KDQogICAgdHJ5Og0KICAgICAgICBjbGllbnQgPSBhd2FpdCBnZXRfaHR0cF9jbGllbnQoKQ0KDQogICAgICAgIHBheWxvYWQgPSB7DQogICAgICAgICAgICAibW9kZWwiOiByZXF1ZXN0Lm1vZGVsLA0KICAgICAgICAgICAgIm1lc3NhZ2VzIjogW3sicm9sZSI6IG0ucm9sZSwgImNvbnRlbnQiOiBtLmNvbnRlbnR9IGZvciBtIGluIHJlcXVlc3QubWVzc2FnZXNdLA0KICAgICAgICAgICAgInRlbXBlcmF0dXJlIjogcmVxdWVzdC50ZW1wZXJhdHVyZSwNCiAgICAgICAgICAgICJtYXhfdG9rZW5zIjogcmVxdWVzdC5tYXhfdG9rZW5zLA0KICAgICAgICB9DQoNCiAgICAgICAgaWYgcmVxdWVzdC5yZXNwb25zZV9mb3JtYXQ6DQogICAgICAgICAgICBwYXlsb2FkWyJyZXNwb25zZV9mb3JtYXQiXSA9IHJlcXVlc3QucmVzcG9uc2VfZm9ybWF0DQoNCiAgICAgICAgcmVzcCA9IGF3YWl0IGNsaWVudC5wb3N0KCIvdjEvY2hhdC9jb21wbGV0aW9ucyIsIGpzb249cGF5bG9hZCkNCg0KICAgICAgICBpZiByZXNwLnN0YXR1c19jb2RlICE9IDIwMDoNCiAgICAgICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oDQogICAgICAgICAgICAgICAgc3RhdHVzX2NvZGU9cmVzcC5zdGF0dXNfY29kZSwNCiAgICAgICAgICAgICAgICBkZXRhaWw9ZiJ2TExNIGVycm9yOiB7cmVzcC50ZXh0fSINCiAgICAgICAgICAgICkNCg0KICAgICAgICBkYXRhID0gcmVzcC5qc29uKCkNCiAgICAgICAgZWxhcHNlZCA9ICh0aW1lLnRpbWUoKSAtIHN0YXJ0KSAqIDEwMDANCg0KICAgICAgICByZXR1cm4gQ2hhdFJlc3BvbnNlKA0KICAgICAgICAgICAgY29udGVudD1kYXRhWyJjaG9pY2VzIl1bMF1bIm1lc3NhZ2UiXVsiY29udGVudCJdLA0KICAgICAgICAgICAgbW9kZWw9ZGF0YS5nZXQoIm1vZGVsIiwgcmVxdWVzdC5tb2RlbCksDQogICAgICAgICAgICB1c2FnZT1kYXRhLmdldCgidXNhZ2UiLCB7fSksDQogICAgICAgICAgICB0aW1lX21zPWVsYXBzZWQsDQogICAgICAgICkNCg0KICAgIGV4Y2VwdCBodHRweC5UaW1lb3V0RXhjZXB0aW9uOg0KICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTUwNCwgZGV0YWlsPSJ2TExNIHRpbWVvdXQiKQ0KICAgIGV4Y2VwdCBodHRweC5Db25uZWN0RXJyb3I6DQogICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NTAzLCBkZXRhaWw9ZiJ2TExNIG9mZmxpbmU6IHtWTExNX0JBU0VfVVJMfSIpDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICBsb2dnZXIuZXhjZXB0aW9uKGYiRXJybyBlbSBsbG1fY2hhdDoge2V9IikNCiAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNfY29kZT01MDAsIGRldGFpbD1zdHIoZSkpDQoNCg0KQGFwcC5nZXQoIi9sbG0vbW9kZWxzIikNCmFzeW5jIGRlZiBsaXN0X21vZGVscygpOg0KICAgICIiIkxpc3RhIG1vZGVsb3MgZGlzcG9uaXZlaXMgbm8gdkxMTS4iIiINCiAgICB0cnk6DQogICAgICAgIGNsaWVudCA9IGF3YWl0IGdldF9odHRwX2NsaWVudCgpDQogICAgICAgIHJlc3AgPSBhd2FpdCBjbGllbnQuZ2V0KCIvdjEvbW9kZWxzIiwgdGltZW91dD0xMC4wKQ0KDQogICAgICAgIGlmIHJlc3Auc3RhdHVzX2NvZGUgIT0gMjAwOg0KICAgICAgICAgICAgcmFpc2UgSFRUUEV4Y2VwdGlvbihzdGF0dXNfY29kZT1yZXNwLnN0YXR1c19jb2RlLCBkZXRhaWw9InZMTE0gZXJyb3IiKQ0KDQogICAgICAgIGRhdGEgPSByZXNwLmpzb24oKQ0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgIm1vZGVscyI6IFttWyJpZCJdIGZvciBtIGluIGRhdGEuZ2V0KCJkYXRhIiwgW10pXSwNCiAgICAgICAgICAgICJ2bGxtX3VybCI6IFZMTE1fQkFTRV9VUkwsDQogICAgICAgIH0NCg0KICAgIGV4Y2VwdCBodHRweC5Db25uZWN0RXJyb3I6DQogICAgICAgIHJhaXNlIEhUVFBFeGNlcHRpb24oc3RhdHVzX2NvZGU9NTAzLCBkZXRhaWw9ZiJ2TExNIG9mZmxpbmU6IHtWTExNX0JBU0VfVVJMfSIpDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTUwMCwgZGV0YWlsPXN0cihlKSkNCg0KDQojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCiMgTWFpbg0KIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQoNCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6DQogICAgaW1wb3J0IGFyZ3BhcnNlDQogICAgaW1wb3J0IHV2aWNvcm4NCg0KICAgIHBhcnNlciA9IGFyZ3BhcnNlLkFyZ3VtZW50UGFyc2VyKGRlc2NyaXB0aW9uPSJHUFUgU2VydmVyIikNCiAgICBwYXJzZXIuYWRkX2FyZ3VtZW50KCItLXBvcnQiLCB0eXBlPWludCwgZGVmYXVsdD04MDgwLCBoZWxwPSJQb3J0YSIpDQogICAgcGFyc2VyLmFkZF9hcmd1bWVudCgiLS1ob3N0IiwgdHlwZT1zdHIsIGRlZmF1bHQ9IjAuMC4wLjAiLCBoZWxwPSJIb3N0IikNCiAgICBwYXJzZXIuYWRkX2FyZ3VtZW50KCItLXZsbG0tdXJsIiwgdHlwZT1zdHIsIGRlZmF1bHQ9Tm9uZSwgaGVscD0iVVJMIGRvIHZMTE0iKQ0KICAgIGFyZ3MgPSBwYXJzZXIucGFyc2VfYXJncygpDQoNCiAgICBpZiBhcmdzLnZsbG1fdXJsOg0KICAgICAgICBWTExNX0JBU0VfVVJMID0gYXJncy52bGxtX3VybA0KDQogICAgbG9nZ2VyLmluZm8oZiJJbmljaWFuZG8gR1BVIFNlcnZlciBlbSB7YXJncy5ob3N0fTp7YXJncy5wb3J0fSIpDQogICAgbG9nZ2VyLmluZm8oZiJ2TExNOiB7VkxMTV9CQVNFX1VSTH0iKQ0KDQogICAgdXZpY29ybi5ydW4oDQogICAgICAgICJncHVfc2VydmVyOmFwcCIsDQogICAgICAgIGhvc3Q9YXJncy5ob3N0LA0KICAgICAgICBwb3J0PWFyZ3MucG9ydCwNCiAgICAgICAgbG9nX2xldmVsPSJpbmZvIiwNCiAgICApDQpFTkRPRkZJTEUNCg0KZWNobyAiZ3B1X3NlcnZlci5weSBjcmlhZG8iDQoNCiMgSW5zdGFsYSBkZXBlbmRlbmNpYXMNCmVjaG8gIiINCmVjaG8gIkluc3RhbGFuZG8gZGVwZW5kZW5jaWFzLi4uIg0KcGlwIGluc3RhbGwgLXEgZmFzdGFwaSB1dmljb3JuIGh0dHB4IHB5ZGFudGljIEZsYWdFbWJlZGRpbmcNCg0KZWNobyAiIg0KZWNobyAiPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0iDQplY2hvICJTRVRVUCBDT01QTEVUTyEiDQplY2hvICI9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSINCmVjaG8gIiINCmVjaG8gIlBhcmEgaW5pY2lhciBvIEdQVSBTZXJ2ZXI6Ig0KZWNobyAiICBjZCAvd29ya3NwYWNlL3JhZy1waXBlbGluZSINCmVjaG8gIiAgcHl0aG9uIGdwdV9zZXJ2ZXIucHkgLS1wb3J0IDgwODAiDQplY2hvICIiDQplY2hvICJPIHNlcnZpZG9yIGZpY2FyYSBkaXNwb25pdmVsIGVtOiINCmVjaG8gIiAgaHR0cDovL2xvY2FsaG9zdDo4MDgwIChpbnRlcm5vKSINCmVjaG8gIiAgaHR0cDovLzE5NS4yNi4yMzMuNzA6NTUyNzggKGV4dGVybm8pIg0KZWNobyAiIg0K' | base64 -d > /workspace/setup_pod.sh && bash /workspace/setup_pod.sh